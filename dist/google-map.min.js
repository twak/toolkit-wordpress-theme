var toolkitMap=function(){var e,t,o,n=this,s=[],a="custom_style";n.settings={el:"#googlemap",iconDir:"./assets/dist/img/google-map-icons",mapCenterLat:53.801277,mapCenterLng:-1.548567,zoom:15,markers:[{id:"defaultLeeds",lat:"54.801277",lng:"-1.548567",title:"University of Leeds",type:"default",html:"<span>Default marker</span>",icon:"local-essentials"}]};var l=function(e){$.extend(n.settings,e),r(),u(n.settings.markers)},r=function(){e=new google.maps.Map(document.querySelector(n.settings.el),{zoom:n.settings.zoom,scrollwheel:!1,panControl:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!0,overviewMapControl:!1,center:new google.maps.LatLng(n.settings.mapCenterLat,n.settings.mapCenterLng),mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,a]}}),p()},p=function(){var t=new google.maps.StyledMapType([{stylers:[{saturation:-100}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#7AA9DD"}]},{elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#9CBA7F"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"road.arterial",elementType:"labels.text",stylers:[{visibility:"on"}]},{featureType:"road.local",elementType:"labels.text",stylers:[{visibility:"on"}]},{}],{name:"Styled Map"});e.mapTypes.set("styled_map",t),e.setMapTypeId("styled_map")},g=function(t,o){e.setCenter(new google.maps.LatLng(t,o))},c=function(t){e.setZoom(t)},m=function(t){if(void 0!==t){var o=t,n=[];for(i in o){var s=(o[i],o[i].lat),a=o[i].lng;n.push(new google.maps.LatLng(s,a))}new google.maps.Polyline({path:n,strokeOpacity:.8,strokeColor:"#a97e4f",map:e})}},m=function(t){if(void 0!==t){var o=t,n=[];for(i in o){var s=(o[i],o[i].lat),a=o[i].lng;n.push(new google.maps.LatLng(s,a))}new google.maps.Polyline({path:n,strokeOpacity:.8,strokeColor:"#a97e4f",map:e}),new google.maps.Polyline({path:n,strokeOpacity:.5,strokeWeight:10,strokeColor:"#c4a480",map:e})}},f=function(t,o,i,s,a){var a=a||"residence.png",l={url:n.settings.iconDir+a,scaledSize:new google.maps.Size(32,32)},r=new google.maps.Marker({position:t,map:e,icon:l});return r.set("type",s),r.set("id",i),y(r,o),r},y=function(t,o){infowindow=new google.maps.InfoWindow,google.maps.event.addListener(t,"click",function(){infowindow.setContent('<div class="gm-info-window">'+o+"</div>"),infowindow.open(e,t)})},u=function(e){C();for(var t=0;t<e.length;t++){var o=e[t].id,i=e[t].type,n=e[t].lat,a=e[t].lng,l=e[t].title,r=e[t].icon,p=e[t].html,g=new google.maps.LatLng(n,a),c="";c+=l?'<strong class="gm-title">'+l+"</strong>":"",c+=p?'<span class="gm-content">'+p+"</span>":"",s[o]=f(g,c,o,i,r)}},d=function(e){for(i in s)e?s[i].type===e&&s[i].setVisible(!1):s[i].setVisible(!1)},v=function(e){for(i in s)e?s[i].type===e&&s[i].setVisible(!0):s[i].setVisible(!0)},w=function(e){for(i in s)e?s[i].type===e&&(s[i].getVisible()?s[i].setVisible(!1):s[i].setVisible(!0)):s[i].getVisible()?s[i].setVisible(!1):s[i].setVisible(!0)},C=function(){for(i in s)s[i].setMap(null);s=[]},k=function(t){s[t].setMap(e),g(s[t].position.lat(),s[t].position.lng()),c(n.settings.zoom)},M=function(e){google.maps.event.trigger(s[e],"click"),k(e)},T=function(i,n,s){t=new google.maps.DirectionsRenderer,o=new google.maps.DirectionsService,t.setMap(e);var a=parseFloat(n[0]),l=parseFloat(n[1]),r=parseFloat(s[0]),p=parseFloat(s[1]);o.route({origin:{lat:a,lng:l},destination:{lat:r,lng:p},travelMode:google.maps.TravelMode[i]},function(e,o){"OK"==o?t.setDirections(e):window.alert("Directions request failed due to "+o)})},b=function(){void 0!==t&&t.setMap(null)},h=function(e){$(".gm-flyout").removeClass("active"),$(e).addClass("active"),$(".gm-flyout-close").click(function(){return $(e).removeClass("active"),!1})},L=function(e){$(e).hasClass("active")?($(".gm-flyout").removeClass("active"),$(e).removeClass("active")):($(".gm-flyout").removeClass("active"),$(e).addClass("active")),$(".gm-flyout-close").click(function(){return $(e).removeClass("active"),console.log(1),!1})};return{init:l,showFlyout:h,toggleFlyout:L,mapMarkers:u,hideMarkers:d,showMarkers:v,toggleMarkers:w,goToMarker:k,triggerMarker:M,initDirections:T,removeDirections:b,mapPolyline:m}}();